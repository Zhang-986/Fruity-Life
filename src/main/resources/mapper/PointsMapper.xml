<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.fruit.mapper.PointsMapper">
    <insert id="insertPoints">
        insert into user_points (user_id) value (#{id})
    </insert>


    <update id="updateUserPointsById" >
        update user_points set points = points + #{points}
        where user_id = #{userId}
        <selectKey resultType="long" keyProperty="points" order="AFTER">
            select points
            from user_points
            where user_id = #{userId}
        </selectKey>
    </update>


    <select id="getPointsByUserId" resultType="java.lang.Long">
        select points
        from user_points
        where user_id = #{userId}
    </select>
</mapper>